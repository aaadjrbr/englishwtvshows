<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Static Site</title>
    <!-- Add Netlify Identity widget script -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <button onclick="openNetlifyModal();">Log In</button>
    <button onclick="logoutUser();">Log Out</button> <!-- Add a Logout button -->
    
    <div id="protected-content">
        <p>Welcome to the protected content! This is only visible to logged-in users.</p>
    </div>

    <!-- JavaScript to open the login modal -->
    <script>
        function openNetlifyModal() {
            if (window.netlifyIdentity) {
                window.netlifyIdentity.open();
            } else {
                // Fallback if Identity widget doesn't load
                alert("Netlify Identity widget not available.");
            }
        }

        function logoutUser() {
            if (window.netlifyIdentity) {
                window.netlifyIdentity.logout();
            }
        }

        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", (user) => {
                if (user) {
                    // User is logged in
                    console.log("Logged in as", user.email);
                } else {
                    // User is not logged in
                    console.log("Not logged in");
                }
            });
        }

        if (window.netlifyIdentity) {
            // Check if the user is logged in
            window.netlifyIdentity.on("init", (user) => {
                if (user) {
                    // User is logged in, show the protected content
                    document.getElementById("protected-content").style.display = "block";
                } else {
                    // User is not logged in, hide the protected content
                    document.getElementById("protected-content").style.display = "none";
                }
            });
        }
    </script>
</body>
</html>
